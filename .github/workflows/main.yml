strategy:
  matrix:
    python-version: [3.8]

steps:
- name: Checkout code
  uses: actions/checkout@v2
  
- name: Setup Python
  uses: actions/setup-python@v4
  with:
    python-version: ${{ matrix.python-version }}

- name: Install Dependencies
  run: |
    python -m pip install --upgrade pip
    pip install flake8 pytest
    if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

- name: Lint with flake8
  run: |
    flake8 --count --show-source --statistics

- name: Test with pytest
  run: |
    pytest -v
